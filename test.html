<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>英超比赛与积分榜</title>
<style>
  body { background-color: #121212; color: #fff; font-family: Arial, sans-serif; margin: 20px; }
  h2 { text-align:center; margin-bottom:20px; }
  #matches div, #standings div { padding:4px; border-bottom:1px solid #333; display:flex; justify-content:space-between; }
  .team { display:flex; align-items:center; }
</style>
</head>
<body>

<h2>最近 5 场英超比赛结果</h2>
<div id="matches">加载中…</div>

<h2 style="margin-top:40px;">英超积分榜</h2>
<div id="standings">加载中…</div>

<script>
async function loadMatches() {
  const res = await fetch('/api/matches');
  const data = await res.json();
  const container = document.getElementById('matches');
  if (!data.matches || data.matches.length === 0) {
    container.innerHTML = "暂无比赛数据";
    return;
  }
  container.innerHTML = data.matches.map(m => {
    const date = new Date(m.utcDate);
    return `
      <div>
        <div class="team">${m.homeTeam.name}</div>
        <div><strong>${m.score.fullTime.home} - ${m.score.fullTime.away}</strong></div>
        <div class="team">${m.awayTeam.name}</div>
        <div style="font-size:12px; color:#aaa;">${date.toLocaleDateString()}</div>
      </div>
    `;
  }).join('');
}

async function loadStandings() {
  const res = await fetch('/api/standings');
  const data = await res.json();
  const container = document.getElementById('standings');
  if (!data.standings || !data.standings[0].table) {
    container.innerHTML = "暂无积分榜数据";
    return;
  }
  container.innerHTML = data.standings[0].table.map(team => `
    <div>
      <div>${team.position}. ${team.team.name}</div>
      <div>${team.points} 分</div>
    </div>
  `).join('');
}

// 页面加载
loadMatches();
loadStandings();

// 每 5 分钟刷新
setInterval(() => { loadMatches(); loadStandings(); }, 5*60*1000);
</script>

</body>
</html>
